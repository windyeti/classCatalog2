{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["// //= _partials/basket.js\n// //= _partials/review.js\nfunction Container() {\n\tthis.id = '';\n\tthis.className = '';\n\tthis.htmlCode = ''\n}\nContainer.prototype.render = function() {\n\treturn this.htmlCode;\n}\n// ----------- class Good ------------------\nfunction Good( options ) {\n\tContainer.call(this);\n\n\tthis.id_product = options.id_product || '';\n\tthis.price = options.price;\n\tthis.name = options.name;\n\tthis.reviews = options.reviews;\n\tthis.price = options.price;\n\tthis.className = 'good';\n\tthis.htmlCode = '';\n}\nGood.prototype = Object.create(Container.prototype);\nGood.prototype.constructor = Good;\n\nGood.prototype.render = function() {\n\tvar self = this;\n\tvar\t$divGood = $('<div>').attr({'id' : 'product_' + this.id_product, 'class' : 'good'});\n\tvar\t$divName = $('<div>').attr({'class' : 'product_name'}).text(this.name);\n\tvar\t$divPrice = $('<div>').attr({'class' : 'product_price'}).text(this.price + ' руб.');\n\tvar\t$divReviews = $('<div>').attr({'class' : 'product_reviews'}).text('Отзывы');\n\t$('<div>').attr({'class' : 'product_addNewReview'}).text('Добавить отзыв').appendTo($divReviews);\n\t\t$(this.reviews).each(function() {\n\t\tvar\t$divReview = $('<div>').attr({'class' : 'product_review'});\n\t\t\t( $('<span>').attr({'class' : 'product_submit'}).text(this.submit) ).appendTo($divReview);\n\t\t\t( $('<span>').attr({'class' : 'product_addPlus'}).text('+') ).appendTo($divReview);\n\t\t\t( $('<span>').attr({'class' : 'product_delete'}).text('-') ).appendTo($divReview);\n\t\t\t( $('<span>').attr({'class' : 'product_textAbout'}).text(this.textAbout) ).appendTo($divReview);\n\n\t\t\t$divReview.appendTo($divReviews);\n\t\t});\n\n\t$divName.appendTo($divGood);\n\t$divPrice.appendTo($divGood);\n\t$divReviews.appendTo($divGood);\n\t$('<button>').attr({'class' : 'product_button_buy'}).text('Купить').appendTo($divGood)\n\n\treturn $divGood;\n}\n// --------------- end class Good ---------------\nfunction Catalog() {\n\tContainer.call(this);\n\n\tthis.id = 'catalogGoods';\n\tthis.goodItems = [];\n\tthis.htmlCode = '';\n}\nCatalog.prototype = Object.create(Container.prototype);\nCatalog.prototype.constructor = Catalog;\n\nCatalog.prototype.getListGoods = function() {\n\t$.ajax({\n\t\turl : 'catalog.json',\n\t\tdataType : 'json',\n\t\tcontext : this,\n\t\tsuccess : function(data) {\n\t\t\tif( data.result != 1 ) {\n\t\t\t\tconsole.log('ошибка в результате');\n\t\t\t\treturn\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\t$(data.goods).each(function() {\n\t\t\t\tself.goodItems.push( new Good( this ) );\n\t\t\t});\n\t\t\tthis.render();\n\t\t}\n\t});\n}\nCatalog.prototype.render = function() {\n\t// создаем блок div для каталога\n\tthis.htmlCode = $('div').attr({'id':this.id});\n\tvar self = this;\n\t$(this.goodItems).each(function() {\n\t\tself.htmlCode.append( this.render() );\n\t});\n\t$('.good').on('click','.product_addNewReview', function() {\n\t\tthis.idProductForAddReview = $(this).parent().parent().attr('id');\n\t\tconsole.log(this.idProductForAddReview);\n\n\t\tthis.$divModale = $('<div>').attr({'class':'modale'}).text('Введите текст отзыва.');\n\t\tthis.$formModale = $('<form>').attr({'class':'form_modale'});\n\t\t( $('<input>').attr({'type':'text','class':'input_modale'}) ).appendTo(this.$formModale);\n\t\t( $('<button>').attr({'class':'button_modale'}).text('OK') ).appendTo(this.$formModale);\n\t\tthis.$divModale.append( this.$formModale );\n\t\tthis.$divModale.appendTo( $('body') );\n\n\t\tvar self = this;\n\t\t$('.modale').on('click','.button_modale', function(e) {\n\t\te.preventDefault();\n\t\tself.newReviewText = $(this).parent().find('.input_modale').val();\n\t\tself.$divModale.remove();\n\t\tvar $blockReviews = $( '#' + self.idProductForAddReview + ' .product_reviews' );\n\n\t\tvar\t$blockReview = $('<div>').attr({'class' : 'product_review'});\n\t\t\t( $('<span>').attr({'class' : 'product_submit'}).text('0') ).appendTo($blockReview);\n\t\t\t( $('<span>').attr({'class' : 'product_addPlus'}).text('+') ).appendTo($blockReview);\n\t\t\t( $('<span>').attr({'class' : 'product_delete'}).text('-') ).appendTo($blockReview);\n\t\t\t( $('<span>').attr({'class' : 'product_textAbout'}).text(self.newReviewText) ).appendTo($blockReview);\n\n\t\t$blockReview.appendTo($blockReviews);\n\t\t});\n\t})\n}\n\n\n// Catalog.prototype.render = function(wrapper_catalog) {\n// \tthis.$divCatalog = $('<div>').attr({'id':this.id}).text('Каталог');\n// \tthis.$divCatalog.appendTo(wrapper_catalog);\n// \tthis.getGoods();\n// }\n// Catalog.prototype.getGoods = function() {\n// \t$.ajax({\n// \t\turl : 'catalog.json',\n// \t\tdataType : 'json',\n// \t\tcontext : this,\n// \t\tsuccess : function(data) {\n// \t\t\tif(data.result != 1) {\n// \t\t\t\tconsole.log('что-то не так на сервере');\n// \t\t\t\treturn\n// \t\t\t}\n// \t\t\tthis.goods = data.goods;\n// \t\t\tthis.renderGoods(this.goods)\n// \t\t}\n// \t})\n// }\n// Catalog.prototype.renderGoods = function(goods) {\n// \tvar self = this;\n// \t$(goods).each(function() {\n// \tvar\t$divGood = $('<div>').attr({'id' : 'product_' + this.id_product, 'class' : 'good'});\n// \tvar\t$divName = $('<div>').attr({'class' : 'product_name'}).text(this.name);\n// \tvar\t$divPrice = $('<div>').attr({'class' : 'product_price'}).text(this.price + ' руб.');\n// \tvar\t$divReviews = $('<div>').attr({'class' : 'product_reviews'}).text('Отзывы');\n// \t$('<div>').attr({'class' : 'product_addNewReview'}).text('Добавить отзыв').appendTo($divReviews);\n// \t\t$(this.reviews).each(function() {\n// \t\tvar\t$divReview = $('<div>').attr({'class' : 'product_review'});\n// \t\t\t( $('<span>').attr({'class' : 'product_submit'}).text(this.submit) ).appendTo($divReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_addPlus'}).text('+') ).appendTo($divReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_delete'}).text('-') ).appendTo($divReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_textAbout'}).text(this.textAbout) ).appendTo($divReview);\n\n// \t\t\t$divReview.appendTo($divReviews);\n// \t\t});\n\n// \t\t$divName.appendTo($divGood);\n// \t\t$divPrice.appendTo($divGood);\n// \t\t$divReviews.appendTo($divGood);\n// \t\t$('<button>').attr({'class' : 'product_button_buy'}).text('Купить').appendTo($divGood);\n// \t\t$divGood.appendTo(self.$divCatalog);\n// \t});\n// \t$('.good').on('click','.product_addNewReview', function() {\n// \t\tthis.idProductorAddNewReview = $(this).closest('.good').attr('id').split('_')[1];\n// \t\tcatalog.addNewReview(this.idProductorAddNewReview);\n// });\n// }\n// Catalog.prototype.addNewReview = function(id_product) {\n// \tthis.$divModale = $('<div>').attr({'class':'modale'}).text('Введите текст отзыва.');\n// \tthis.$formModale = $('<form>').attr({'class':'form_modale'});\n// \t( $('<input>').attr({'type':'text','class':'input_modale'}) ).appendTo(this.$formModale);\n// \t( $('<button>').attr({'class':'button_modale'}).text('OK') ).appendTo(this.$formModale);\n// \tthis.$divModale.append( this.$formModale );\n// \tthis.$divModale.appendTo( $('body') );\n\n// \tthis.goodForAddNewReview = $(this.goods).filter(function() {\n// \t\treturn this.id_product == id_product;\n// \t});\n\n// \tvar self = this;\n\n// \t\t$('.modale').on('click','.button_modale', function(e) {\n// \t\te.preventDefault();\n// \t\tself.newReviewText = $(this).parent().find('.input_modale').val();\n// \t\tself.$divModale.empty();\n// \t\tvar $blockReviews = $('#product_' + id_product + ' .product_reviews');\n\n// \t\tvar\t$blockReview = $('<div>').attr({'class' : 'product_review'});\n// \t\t\t( $('<span>').attr({'class' : 'product_submit'}).text('0') ).appendTo($blockReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_addPlus'}).text('+') ).appendTo($blockReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_delete'}).text('-') ).appendTo($blockReview);\n// \t\t\t( $('<span>').attr({'class' : 'product_textAbout'}).text(self.newReviewText) ).appendTo($blockReview);\n\n// \t\t$blockReview.appendTo($blockReviews);\n// \t\t// var $newReview = $()\n\n\t\t\n// \t});\n// }"],"file":"main.js"}